description "Rippled as a service"
author       "Dmitry Grigorenko"

start on runlevel [2345]
stop on runlevel [016]

console none

setuid <%= @user %>
setgid <%= @group %>


# rippled used to open many files
# limit nofile 8192 8192 was advised by Ripple Labs at some point

limit nofile 8192 8192

# if stirage is ephemeral, proper permissions might be lost
# pre-start script
# sudo chown -R <%= @user %> <%= @rock_db_folder %>
# sudo chown -R <%= @user %> <%= @operational_db_folder %>
# sudo chown -R <%= @user %> <%= @debug_logfile_path %>
# end script

exec <%= @binary %> --net --conf <%= @config %> --fg
respawn
